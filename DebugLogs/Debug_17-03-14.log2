Debuging of a convergence failure 

Error:
Convergence is stalled where there seems to be an obvious descent direction
Point of interest: iteration 85 profile 22


Description
The zone marked in the data bellow indicates where the mode was expected to reduce the volume error.
However the increase in the VOF in the key design cell of that zone leads to an increase of the error in that zone.

This is because the cell at the centre of this movement is fill #38 which is very nearly full. This means 
that the length of profile in that cell is very small this means that achieving a comparable movement in 
the neighbouring cell will require a larger volume fraction change. The current set up means that there 
is a significant undershoot in the neighbouring cells which more than cancels out the improvement brought
 along at the level of the cell.

 This overshooting error is extremely pronounced for this very small profile length in the cell

Possible solution:

The smoothing factors calculated earlier need to be calculated on the fly using profile lengths in each cell
as a smoothing, or the current scalings could be scaled at posteriory to reflect the expected response.

Scaling could be:

Ti= Si * Tim1/Sim1 * (Li/Lim1)*(Vim1/Vi)
Where 
T true applied scaling
S Theoretical scaling
L the length of the profile in a given cell
V the volume of a cell
i the current cell 
im1 the previous cell in the ordering of coefficient

Tim1/Si -> Maintains the previous real scaling that was used

(Li/Lim1) -> Compares the lengths: - if L is short in the previous cell we want an 
		increased VOF response as the constraint is less strict in the current cell 
									-if Li is short in this cell we want a small 
		response as this will damp the oscillation.
(Vim1/Vi) -> This is to reflect the difference in sizes of the neighbouring cells


WARNING 
this solution requires some attention to detail as this could cause issues in the mode 
identification of the optimisation method. The central part of the mode is defined by the Largest 
response. THis might not be the case anymore.

WARNING
Similarly this might cause very large modes to appear and might require design variable modes to 
be scaled by the complete volume response requested.



Associated Data:

	Profile 85.01 Loop vs Target coord
	See Debug_17-03-14_errorCompare.fig for detail of the change in error
	Error Area*1000		area Length		    X position of area   Y position of area
   0.068413543394122   0.042635555749951   0.127176020790485   0.071863200036026
   0.413577928957743   0.060282800876316   0.075716842477351   0.054482845678709
   1.359097571878343   0.045481154942831   0.022834864567778   0.021629687682948
   0.000935673864219   0.000271437310388  -0.000041431558831   0.000044288099428
   4.392837092734594   0.086072901793200   0.043118332743937  -0.014683267111133  <- Zone of interest
   0.389778031820390   0.062445477015943   0.117377522148509  -0.029796931820156
   0.060109636703021   0.043820239074503   0.170510380193731  -0.028455785369202
   0.575830771332435   0.211516223286501   0.298178611374233  -0.022870232688425
   0.245886092851932   0.172052191320642   0.489962818677805  -0.014522446754951
   0.195236545310837   0.188789969514970   0.670383899095611  -0.007861455940353
   0.043460180690237   0.093401146273922   0.811479456990057  -0.003580784501494
   0.089789471814183   0.121236844659319   0.918798452456677  -0.001543168388850
   0.007853744712539   0.020583125213664   0.989708437393168  -0.000427023708497
   0.000624999672576   0.000237081461463   1.000118540730731   0.000000000002973
   0.049805904542292   0.093737177613937   0.953131411193032   0.012470289392324
   0.000000004481857   0.000033634250526   0.906246005260800   0.024681014035732
   0.000155328485357   0.007904978201233   0.902276699034920   0.025632937291291
   0.058158049218373   0.189723019799161   0.803462700034723   0.045860649248808
   0.000051912322500   0.005525976568478   0.705838201850903   0.065603256870925
   0.005261319893714   0.021440461876130   0.692354982628599   0.067808165834194
   0.037403944327327   0.049178323321375   0.657045590029847   0.073221418244972
   0.006318752398776   0.016701617539345   0.624105619599486   0.078034445036925
   0.014235856304550   0.035089933143629   0.598209844257999   0.081397893080420
   0.515303298722228   0.167680826505888   0.496824464433241   0.090613254249741
   0.779054466491330   0.161926193567048   0.332020954396773   0.096474153354868
   0.156427885582467   0.102564058947788   0.199775828139355   0.085753520303129
   
   
	Profile 85.22 Loop vs Target coord
	Error Area*1000		area Length		    Position of area   
   0.068414151021826   0.042635583434189   0.127176049518077   0.071863207215990
   0.413575869397409   0.060282728662736   0.075716893469614   0.054482869768829
   1.359091101689673   0.045481298528119   0.022834879874187   0.021629563677813
   0.000935246937382   0.000271488451664  -0.000041513615705   0.000044333490874
   4.393796108418666   0.086073565289583   0.043118585858480  -0.014683087287438 <- Zone of interest
   0.391114489944422   0.062446959892956   0.117378848449749  -0.029798823053082
   0.060438929149011   0.043862128184542   0.170533392488499  -0.028454880348932
   0.575977678335135   0.211457459166715   0.298193186164127  -0.022869628798325
   0.246036043736359   0.172070396430782   0.489957113962876  -0.014522657957955
   0.195276864491582   0.188791023412788   0.670387823884661  -0.007861328881038
   0.043461604017321   0.093398514354204   0.811482592768157  -0.003580706773761
   0.089788752957593   0.121235025606177   0.918799362748347  -0.001543150553979
   0.007853736924695   0.020583124448564   0.989708437775718  -0.000427023703340
   0.000624999652859   0.000237081457341   1.000118540728671   0.000000000000019
   0.049805904379003   0.093737177801478   0.953131411099261   0.012470289411632
   0.000000004481726   0.000033633757785   0.906246005319630   0.024681014021593
   0.000155328522811   0.007904978861509   0.902276699009982   0.025632937296797
   0.058158072458350   0.189723100337568   0.803462659410444   0.045860656099737
   0.000051908446798   0.005525823613490   0.705838197434915   0.065603257680677
   0.005261336216634   0.021440542158598   0.692355014548871   0.067808160487328
   0.037403912156712   0.049178309430158   0.657045588754493   0.073221418500796
   0.006318760338650   0.016701628519995   0.624105619779417   0.078034444995110
   0.014235853150879   0.035089930462908   0.598209840287966   0.081397893592089
   0.515302980657902   0.167680807458897   0.496824471327063   0.090613254045080
   0.779054243695777   0.161926189844116   0.332020972675557   0.096474154360207
   0.156428311212340   0.102564036518327   0.199775859494335   0.085753526204675
   
   
   Difference between the first columns of the two (x1000):
   Profile 1			Profile 22			Difference
   0.068414151021826   0.068413543394122   0.000607627704000
   0.413575869397409   0.413577928957743  -0.002059560334000
   1.359091101689673   1.359097571878343  -0.006470188669949
   0.000935246937382   0.000935673864219  -0.000426926837000
   4.393796108418666   4.392837092734594   0.959015684071751  <- Zone of interest (as marked above)
   0.391114489944422   0.389778031820390   1.336458124031992
   0.060438929149011   0.060109636703021   0.329292445990004
   0.575977678335135   0.575830771332435   0.146907002700036
   0.246036043736359   0.245886092851932   0.149950884427014
   0.195276864491582   0.195236545310837   0.040319180744985
   0.043461604017321   0.043460180690237   0.001423327083999
   0.089788752957593   0.089789471814183  -0.000718856589990
   0.007853736924695   0.007853744712539  -0.000007787844000
   0.000624999652859   0.000624999672576  -0.000000019717000
   0.049805904379003   0.049805904542292  -0.000000163289000
   0.000000004481726   0.000000004481857  -0.000000000131000
   0.000155328522811   0.000155328485357   0.000000037454000
   0.058158072458350   0.058158049218373   0.000023239977005
   0.000051908446798   0.000051912322500  -0.000003875702000
   0.005261336216634   0.005261319893714   0.000016322920000
   0.037403912156712   0.037403944327327  -0.000032170614998
   0.006318760338650   0.006318752398776   0.000007939874000
   0.014235853150879   0.014235856304550  -0.000003153671000
   0.515302980657902   0.515303298722228  -0.000318064325988
   0.779054243695777   0.779054466491330  -0.000222795553007
   0.156428311212340   0.156427885582467   0.000425629872985
   
   
   
   
   
   
   Similar Data for the 21st loop:
   
   0.068415118866965   0.042635624817516   0.127176097218534   0.071863219225932
   0.413573275255625   0.060282680047349   0.075716944786102   0.054482892846051
   1.359027913886805   0.045481330527737   0.022834939498559   0.021629695222143
   0.000935570684839   0.000271450804625  -0.000041451167622   0.000044302062491
   4.393048754386220   0.086073097206926   0.043118411054369  -0.014683223372061 <- zone of interest
   0.390133029293621   0.062445848975555   0.117377884145609  -0.029797434780509
   0.060197162094515   0.043831398849482   0.170516508058128  -0.028455544350613
   0.575869795567328   0.211500578626784   0.298182496796260  -0.022870071713654
   0.245925955551193   0.172057031704273   0.489961301961788  -0.014522502907535
   0.195247263790889   0.188790249639271   0.670384942633560  -0.007861422157051
   0.043460559072750   0.093400446479961   0.811480290693176  -0.003580763836083
   0.089789280733923   0.121236361152803   0.918798694509558  -0.001543163646777
   0.007853742678243   0.020583124914041   0.989708437542979  -0.000427023706028
   0.000624999652844   0.000237081457739   1.000118540728870  -0.000000000000005
   0.049805904459710   0.093737177879025   0.953131411060487   0.012470289420763
   0.000000004481672   0.000033633555021   0.906246005343464   0.024681014015865
   0.000155328526293   0.007904978940679   0.902276699095614   0.025632937276218
   0.058158109959439   0.189723230057858   0.803462594596345   0.045860667008654
   0.000051902232840   0.005525578374162   0.705838190380335   0.065603258974675
   0.005261362412380   0.021440670923652   0.692355065731427   0.067808151913826
   0.037403860455669   0.049178287106011   0.657045586716596   0.073221418910179
   0.006318773121798   0.016701646200249   0.624105620063466   0.078034444928555
   0.014235848026807   0.035089926108753   0.598209833908965   0.081397894414394
   0.515302469466715   0.167680776863070   0.496824482423053   0.090613253714508
   0.779053885339821   0.161926183850250   0.332021002066393   0.096474155976906
   0.156428996274641   0.102564000513976   0.199775909884280   0.085753535687575